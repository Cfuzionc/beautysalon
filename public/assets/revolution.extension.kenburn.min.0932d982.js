(function(z){var c=jQuery.fn.revolution,x={alias:"KenBurns Min JS",name:"revolution.extensions.kenburn.min.js",min_core:"5.4",version:"1.3.1"};jQuery.extend(!0,c,{stopKenBurn:function(n){if(c.compare_version(x).check==="stop")return!1;n.data("kbtl")!=null&&n.data("kbtl").pause()},startKenBurn:function(n,b,k){if(c.compare_version(x).check==="stop")return!1;var i=n.data(),m=n.find(".defaultimg"),B=m.data("lazyload")||m.data("src"),D=(i.owidth,i.oheight,b.sliderType==="carousel"?b.carousel.slide_width:b.ul.width()),K=b.ul.height();if(n.data("kbtl")&&n.data("kbtl").kill(),k=k||0,n.find(".tp-kbimg").length==0){var f=m.data("mediafilter");f=f===void 0?"":f,n.append('<div class="tp-kbimg-wrap '+f+'" style="z-index:2;width:100%;height:100%;top:0px;left:0px;position:absolute;"><img class="tp-kbimg" src="'+B+'" style="position:absolute;" width="'+i.owidth+'" height="'+i.oheight+'"></div>'),n.data("kenburn",n.find(".tp-kbimg"))}var y=function(o,d,r,v,h,e,a){var t=o*r,p=d*r,s=Math.abs(v-t),w=Math.abs(h-p),l=new Object;return l.l=(0-e)*s,l.r=l.l+t,l.t=(0-a)*w,l.b=l.t+p,l.h=e,l.v=a,l},M=function(o,d,r,v,h){var e=o.bgposition.split(" ")||"center center",a=e[0]=="center"?"50%":e[0]=="left"||e[1]=="left"?"0%":e[0]=="right"||e[1]=="right"?"100%":e[0],t=e[1]=="center"?"50%":e[0]=="top"||e[1]=="top"?"0%":e[0]=="bottom"||e[1]=="bottom"?"100%":e[1];a=parseInt(a,0)/100||0,t=parseInt(t,0)/100||0;var p=new Object;return p.start=y(h.start.width,h.start.height,h.start.scale,d,r,a,t),p.end=y(h.start.width,h.start.height,h.end.scale,d,r,a,t),p},Q=function(o,d,r){var v=r.scalestart/100,h=r.scaleend/100,e=r.offsetstart!=null?r.offsetstart.split(" ")||[0,0]:[0,0],a=r.offsetend!=null?r.offsetend.split(" ")||[0,0]:[0,0];r.bgposition=r.bgposition=="center center"?"50% 50%":r.bgposition;var t=new Object;if(r.owidth,r.oheight,o*h,r.owidth,r.oheight,t.start=new Object,t.starto=new Object,t.end=new Object,t.endo=new Object,t.start.width=o,t.start.height=t.start.width/r.owidth*r.oheight,t.start.height<d){var p=d/t.start.height;t.start.height=d,t.start.width=t.start.width*p}t.start.transformOrigin=r.bgposition,t.start.scale=v,t.end.scale=h,r.rotatestart=r.rotatestart===0?.01:r.rotatestart,t.start.rotation=r.rotatestart+"deg",t.end.rotation=r.rotateend+"deg";var s=M(r,o,d,e,t);e[0]=parseFloat(e[0])+s.start.l,a[0]=parseFloat(a[0])+s.end.l,e[1]=parseFloat(e[1])+s.start.t,a[1]=parseFloat(a[1])+s.end.t;var w=s.start.r-s.start.l,l=s.start.b-s.start.t,L=s.end.r-s.end.l,_=s.end.b-s.end.t;return e[0]=e[0]>0?0:w+e[0]<o?o-w:e[0],a[0]=a[0]>0?0:L+a[0]<o?o-L:a[0],e[1]=e[1]>0?0:l+e[1]<d?d-l:e[1],a[1]=a[1]>0?0:_+a[1]<d?d-_:a[1],t.starto.x=e[0]+"px",t.starto.y=e[1]+"px",t.endo.x=a[0]+"px",t.endo.y=a[1]+"px",t.end.ease=t.endo.ease=r.ease,t.end.force3D=t.endo.force3D=!0,t};n.data("kbtl")!=null&&(n.data("kbtl").kill(),n.removeData("kbtl"));var O=n.data("kenburn"),T=O.parent(),u=Q(D,K,i),g=new punchgs.TimelineLite;if(g.pause(),u.start.transformOrigin="0% 0%",u.starto.transformOrigin="0% 0%",g.add(punchgs.TweenLite.fromTo(O,i.duration/1e3,u.start,u.end),0),g.add(punchgs.TweenLite.fromTo(T,i.duration/1e3,u.starto,u.endo),0),i.blurstart!==void 0&&i.blurend!==void 0&&(i.blurstart!==0||i.blurend!==0)){var j={a:i.blurstart},q={a:i.blurend,ease:u.endo.ease},F=new punchgs.TweenLite(j,i.duration/1e3,q);F.eventCallback("onUpdate",function(o){punchgs.TweenLite.set(o,{filter:"blur("+j.a+"px)",webkitFilter:"blur("+j.a+"px)"})},[T]),g.add(F,0)}g.progress(k),g.play(),n.data("kbtl",g)}})})(jQuery);
